import java.util.Scanner;

public class BankAccount {
    private static int runningAccountNo = 0;

    private String name;
    private int accountNo;
    private int balance;

    public static void initializeNumber(int startingAccountNo) {
        runningAccountNo = startingAccountNo;
    }

    public BankAccount(String name) {
        this.name = name;
        this.accountNo = runningAccountNo++;
        this.balance = 0;
    }

    public int getAccountNo() {
        return accountNo;
    }

    public int getBalance() {
        return balance;
    }

    public void setBalance(int balance) {
        this.balance = balance;
    }

    public void deposit(int amount) {
        if (amount > 0) {
            balance += amount;
        } else {
            System.out.println("Deposit amount must be positive.");
        }
    }

    public void withdraw(int amount) {
        if (amount > 0) {
            if (balance - amount < 0) {
                System.out.println("Negative Balance Transaction Cancelled");
            } else {
                balance -= amount;
            }
        } else {
            System.out.println("Withdraw amount must be positive.");
        }
    }

    public void display() {
        System.out.print(accountNo+ " ");
        System.out.print(name+" ");
        System.out.println(balance+" ");
    }

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        int startingAccountNo = scanner.nextInt();
        scanner.nextLine();  
        String name = scanner.nextLine();

        BankAccount.initializeNumber(startingAccountNo);

        BankAccount account = new BankAccount(name);

        int n = scanner.nextInt();
        scanner.nextLine();

        for (int i = 0; i < n; i++) {
            String[] transaction = scanner.nextLine().split(" ");
            String command = transaction[0];

            switch (command) {
                case "Deposit":
                    int depositAmount = Integer.parseInt(transaction[1]);
                    account.deposit(depositAmount);
                    break;

                case "Withdraw":
                    int withdrawAmount = Integer.parseInt(transaction[1]);
                    account.withdraw(withdrawAmount);
                    break;

                case "Display":
                    account.display();
                    break;

                default:
                    System.out.println("Invalid command");
            }
        }

        scanner.close();
    }
}
